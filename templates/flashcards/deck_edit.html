{% extends 'base_dashboard.html' %}
{% load static %}

{% block title %}Edit Deck - {{ deck.title }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/flashcards.css' %}">
<link rel="stylesheet" href="{% static 'css/resources.css' %}?v=1.0">
{% endblock %}

{% block header %}
{% url 'flashcards:deck_detail' deck.pk as detail_url %}
{% include 'components/page_header.html' with page_title='Edit Flashcard Deck' back_url=detail_url show_moderate_btn=False %}
{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card dashboard-card">
      <div class="card-body">
        <h5 class="card-title"><i class="fas fa-pencil"></i> Edit Deck</h5>
        <form method="post" class="mt-3" id="deckEditForm">
          {% csrf_token %}
          <div class="mb-3">{{ form.title.label_tag }}{{ form.title }}</div>
          <div class="mb-3">{{ form.description.label_tag }}{{ form.description }}</div>
          <div class="mb-3">{{ form.category.label_tag }}{{ form.category }}</div>
          
          <!-- Privacy Settings -->
          <div class="mb-4">
            <h6 class="form-section-header">
              <i class="fas fa-lock" style="color: #667eea;"></i> Privacy Settings
            </h6>
            <div class="soft-panel">
              {% include 'components/visibility_toggle.html' with toggle_id='deckVisibilityToggleEdit' hidden_id='deckVisibilityValueEdit' field_name='visibility' is_public=deck.visibility label='Make this deck public (visible to all students)' public_description='Appears in "All Decks" after verification (professor uploads verify immediately).' private_description='Only visible to you under "My Decks".' %}
            </div>
          </div>
          
          <button type="submit" class="btn btn-gradient-primary"><i class="fas fa-save"></i> Save Changes</button>
          <a href="{% url 'flashcards:deck_detail' deck.pk %}" class="btn btn-outline-primary-soft ms-2">Cancel</a>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
