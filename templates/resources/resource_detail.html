{% extends 'base_dashboard.html' %}
{% load static %}

{% block title %}{{ resource.title }}{% endblock %}

{% block extra_css %}<link rel="stylesheet" href="{% static 'css/resources.css' %}?v=1.0">{% endblock %}

{% block extra_js %}
<script src="{% static 'js/resource_detail.js' %}?v=1.1"></script>
{% endblock %}

{% block header %}
{% url 'resources:resource_list' as resources_url %}
{% include 'components/page_header.html' with page_title='Resource Detail' back_url=resources_url show_moderate_btn=False %}
{% endblock %}

{% block content %}
<div class="ri-container">
  <!-- Header Card Component -->
  {% include 'components/detail_header_card.html' with title=resource.title description=resource.description file_type=resource.resource_type icon_name=resource_icon status_tags=status_tags primary_action=primary_action bookmark_form_action=bookmark_url is_bookmarked=is_bookmarked edit_url=edit_url show_bookmark=user.is_authenticated show_edit=is_owner %}

  <!-- Metadata Overview Component -->
  {% include 'components/metadata_overview_card.html' with section_title='Resource Overview' metadata_items=metadata_items %}

  <!-- Tags Section -->
  {% if resource.tags.all %}
  <div class="ri-card mt-3">
    <div class="rd2-section-title mb-2">Tags</div>
    <div class="ri-taglist">
      {% for tag in resource.tags.all %}
        <span class="ri-tag">{{ tag.name }}</span>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Feedback Interface Component -->
  {% if resource.verification_status == 'verified' and user.is_authenticated and user != resource.uploader %}
    {% include 'components/feedback_interface.html' with item_id=resource.pk item_type='resource' current_user_rating=user_rating.stars avg_rating=resource.get_average_rating rating_count=resource.get_rating_count rate_url=rate_url comment_url=comment_url delete_comment_url_name='resources:delete_comment' comments=comments show_rating=True show_comments=True current_user=user %}
  {% endif %}

</div>
{% endblock %}